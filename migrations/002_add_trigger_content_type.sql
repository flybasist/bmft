-- –ú–∏–≥—Ä–∞—Ü–∏—è: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è trigger_content_type
-- –≠—Ç–æ –ø–æ–ª–µ —É–∂–µ –µ—Å—Ç—å –≤ 001_initial_schema.sql –¥–ª—è –Ω–æ–≤—ã—Ö —É—Å—Ç–∞–Ω–æ–≤–æ–∫
-- –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ë–î –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç—É –º–∏–≥—Ä–∞—Ü–∏—é:

ALTER TABLE keyword_reactions 
ADD COLUMN IF NOT EXISTS trigger_content_type TEXT DEFAULT NULL;

-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –ø–æ–ª—é:
-- NULL = –ª—é–±–æ–π —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞
-- 'photo' = —Ç–æ–ª—å–∫–æ —Ñ–æ—Ç–æ
-- 'video' = —Ç–æ–ª—å–∫–æ –≤–∏–¥–µ–æ
-- 'sticker' = —Ç–æ–ª—å–∫–æ —Å—Ç–∏–∫–µ—Ä—ã
-- 'animation' = —Ç–æ–ª—å–∫–æ GIF
-- 'voice' = —Ç–æ–ª—å–∫–æ –≥–æ–ª–æ—Å–æ–≤—ã–µ
-- 'video_note' = —Ç–æ–ª—å–∫–æ –≤–∏–¥–µ–æ-–∫—Ä—É–∂–∫–∏
-- 'audio' = —Ç–æ–ª—å–∫–æ –∞—É–¥–∏–æ
-- 'document' = —Ç–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç—ã/—Ñ–∞–π–ª—ã
-- 'text' = —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

-- –ü—Ä–∏–º–µ—Ä 1: –ü–∞—Å—Ö–∞–ª–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 303724504 (–∏–∑ RTS –±–æ—Ç–∞)
-- RTS config:
--   user_id='303724504'
--   contenttype='photo'
--   answertype='text'
--   regex='disable'
--   answer='@Astrolux , –æ–ø—è—Ç—å —Ç—ã —á—Ç–æ —Ç–æ —Å–ø—ã–ª–µ—Å–æ—Å–∏–ª!'
--   violation=13  # cooldown lookup
--   delta="deltaday_message"  # 24 hours

-- –í–ê–ñ–ù–û: –ó–∞–º–µ–Ω–∏—Ç–µ -1001234567890 –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π chat_id –≤–∞—à–µ–≥–æ —á–∞—Ç–∞!
-- –ß—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å chat_id, –Ω–∞–ø–∏—à–∏—Ç–µ –≤ —á–∞—Ç /chatinfo

INSERT INTO keyword_reactions (
    chat_id,              -- ID —á–∞—Ç–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–π!)
    thread_id,            -- 0 = –≤–µ—Å—å —á–∞—Ç, –Ω–µ —Ç–æ–ø–∏–∫
    user_id,              -- 303724504 = –ê—Å—Ç—Ä–æ–ª—É–∫—Å
    pattern,              -- –ø—É—Å—Ç–æ–π = –ª—é–±–æ–π —Ç–µ–∫—Å—Ç
    response_type,        -- text
    response_content,     -- —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞
    description,          -- –æ–ø–∏—Å–∞–Ω–∏–µ
    is_regex,             -- false = –Ω–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ
    trigger_content_type, -- 'photo' = —Ç–æ–ª—å–∫–æ –Ω–∞ —Ñ–æ—Ç–æ!
    cooldown,             -- 86400 = 24 —á–∞—Å–∞
    daily_limit,          -- 0 = –±–µ–∑ –ª–∏–º–∏—Ç–∞
    delete_on_limit,      -- false = –Ω–µ —É–¥–∞–ª—è—Ç—å
    is_active             -- true = –∞–∫—Ç–∏–≤–Ω–æ
) VALUES (
    -1001234567890,       -- ‚Üê –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –°–í–û–ô CHAT_ID!
    0,                    -- –¥–ª—è –≤—Å–µ–≥–æ —á–∞—Ç–∞
    303724504,            -- user_id –ê—Å—Ç—Ä–æ–ª—É–∫—Å–∞
    '',                   -- –ø—É—Å—Ç–æ–π –ø–∞—Ç—Ç–µ—Ä–Ω
    'text',
    '@Astrolux, –æ–ø—è—Ç—å —Ç—ã —á—Ç–æ —Ç–æ —Å–ø—ã–ª–µ—Å–æ—Å–∏–ª!',
    '–ü–∞—Å—Ö–∞–ª–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ –ê—Å—Ç—Ä–æ–ª—É–∫—Å–∞ (–∏–∑ RTS)',
    false,
    'photo',              -- –ö–õ–Æ–ß–ï–í–û–ï –û–¢–õ–ò–ß–ò–ï: —Ç–æ–ª—å–∫–æ –Ω–∞ —Ñ–æ—Ç–æ
    86400,                -- —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏ (24 —á–∞—Å–∞)
    0,
    false,
    true
);

-- –ü—Ä–∏–º–µ—Ä 2: –†–µ–∞–∫—Ü–∏—è –Ω–∞ —Å—Ç–∏–∫–µ—Ä—ã –≤ —Ç–æ–ø–∏–∫–µ (–¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
-- INSERT INTO keyword_reactions (
--     chat_id, 
--     thread_id, 
--     user_id, 
--     pattern, 
--     response_type, 
--     response_content, 
--     description, 
--     is_regex, 
--     trigger_content_type,
--     cooldown, 
--     daily_limit, 
--     delete_on_limit, 
--     is_active
-- ) VALUES (
--     -1001234567890,   -- ‚Üê –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –°–í–û–ô CHAT_ID!
--     12345,            -- ‚Üê –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê ID –¢–û–ü–ò–ö–ê (–∏–ª–∏ 0 –¥–ª—è –≤—Å–µ–≥–æ —á–∞—Ç–∞)
--     NULL,             -- –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
--     '',
--     'text',
--     '–ö–ª–∞—Å—Å–Ω—ã–π —Å—Ç–∏–∫–µ—Ä! üëç',
--     '–†–µ–∞–∫—Ü–∏—è –Ω–∞ —Å—Ç–∏–∫–µ—Ä—ã',
--     false,
--     'sticker',
--     60,               -- 1 –º–∏–Ω—É—Ç–∞ –∫—É–ª–¥–∞—É–Ω
--     0,
--     false,
--     true
-- );

-- –ö–∞–∫ —É–∑–Ω–∞—Ç—å chat_id?
-- 1. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ —á–∞—Ç
-- 2. –ù–∞–ø–∏—à–∏—Ç–µ –≤ —á–∞—Ç –∫–æ–º–∞–Ω–¥—É: /chatinfo (–µ—Å–ª–∏ –µ—Å—Ç—å —Ç–∞–∫–∞—è –∫–æ–º–∞–Ω–¥–∞)
-- 3. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ @userinfobot
-- 4. –ò–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤ –ª–æ–≥–∞—Ö –±–æ—Ç–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è

-- –ö–∞–∫ —É–∑–Ω–∞—Ç—å user_id?
-- 1. –ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É @userinfobot –≤ –ª–∏—á–∫—É
-- 2. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É /id (–µ—Å–ª–∏ –µ—Å—Ç—å)
-- 3. –ò–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤ –ª–æ–≥–∞—Ö –±–æ—Ç–∞

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:
-- SELECT 
--     id, 
--     user_id, 
--     pattern, 
--     response_content, 
--     trigger_content_type, 
--     cooldown 
-- FROM keyword_reactions 
-- WHERE user_id = 303724504;

-- –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å:
-- id | user_id   | pattern | response_content                        | trigger_content_type | cooldown
-- ---|-----------|---------|----------------------------------------|---------------------|----------
-- 1  | 303724504 |         | @Astrolux, –æ–ø—è—Ç—å —Ç—ã —á—Ç–æ —Ç–æ —Å–ø—ã–ª–µ—Å–æ—Å–∏–ª! | photo               | 86400
