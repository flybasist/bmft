# Changelog

–í—Å–µ –∑–Ω–∞—á–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ BMFT –±—É–¥—É—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ.

–§–æ—Ä–º–∞—Ç –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
–∏ –ø—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç [Semantic Versioning](https://semver.org/lang/ru/).

---

## [1.0] - 2025-11-16

### üéâ –ü–µ—Ä–≤—ã–π —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Ä–µ–ª–∏–∑

**Production Ready** ‚Äî BMFT –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!

**–ì–æ—Ç–æ–≤—ã–π –±–æ—Ç:** [@bmft_bot](https://t.me/bmft_bot)  
**Self-hosted:** –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ README.md

### ‚ú® –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- üìä **Statistics** ‚Äî –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —á–∞—Ç–æ–≤
- üõ°Ô∏è **Limiter** ‚Äî –≥–∏–±–∫–∏–µ –ª–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç —Å VIP-–æ–±—Ö–æ–¥–æ–º
- üé≠ **Reactions** ‚Äî –∞–≤—Ç–æ—Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ —Å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏ –ø–∞—Å—Ö–∞–ª–∫–∞–º–∏
- üö´ **TextFilter** ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã—Ö —Å–ª–æ–≤ —Å regex-–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
- ‚è∞ **Scheduler** ‚Äî –∑–∞–¥–∞—á–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (cron)
- üåü **Topics Support** ‚Äî –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Telegram Forums/Topics

### üèóÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –±–∞–∑–∞

- üóÑÔ∏è PostgreSQL 16+ —Å JSONB –∏ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- üß© –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —è–≤–Ω—ã–º Pipeline
- üìà Materialized Views –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- üîí Audit log –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –≤ event_log
- üê≥ Docker-ready deployment

### üí∞ –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è

- üíé –ë–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω–æ
- üéØ –ü—Ä–µ–º–∏—É–º-–º–æ–¥—É–ª–∏ ‚Äî –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- ü§ù –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–ø–æ–Ω—Å–∏—Ä—É–µ–º—ã–º —Ñ–∏—á–∞–º

---

## [Unreleased]

### üîÑ –ò–∑–º–µ–Ω–µ–Ω–æ

#### –£–¥–∞–ª—ë–Ω –º–µ—Ö–∞–Ω–∏–∑–º enable/disable –º–æ–¥—É–ª–µ–π

**–ü—Ä–∏—á–∏–Ω–∞:** –£–ø—Ä–æ—â–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏

- ‚ùå –£–¥–∞–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `chat_modules` –∏–∑ —Å—Ö–µ–º—ã –ë–î
- ‚ùå –£–¥–∞–ª—ë–Ω `ModuleRepository` –∏ –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã `/enable`, `/disable`, `/modules`
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `IsEnabled()` –∏–∑ –º–æ–¥—É–ª–µ–π (21+ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ)
- ‚úÖ **–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞:** –ú–æ–¥—É–ª–∏ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö
  - Statistics —Ä–∞–±–æ—Ç–∞–µ—Ç **–≤—Å–µ–≥–¥–∞** (–µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã)
  - Limiter —Ä–∞–±–æ—Ç–∞–µ—Ç –µ—Å–ª–∏ –µ—Å—Ç—å –∑–∞–ø–∏—Å–∏ –≤ `content_limits`
  - Reactions —Ä–∞–±–æ—Ç–∞–µ—Ç –µ—Å–ª–∏ –µ—Å—Ç—å –∑–∞–ø–∏—Å–∏ –≤ `keyword_reactions`
  - TextFilter —Ä–∞–±–æ—Ç–∞–µ—Ç –µ—Å–ª–∏ –µ—Å—Ç—å –∑–∞–ø–∏—Å–∏ –≤ `banned_words`
  - Scheduler —Ä–∞–±–æ—Ç–∞–µ—Ç –µ—Å–ª–∏ –µ—Å—Ç—å –∑–∞–ø–∏—Å–∏ –≤ `scheduled_tasks`

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã:**
- `migrations/001_initial_schema.sql` ‚Äî —É–¥–∞–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ chat_modules
- `internal/postgresql/repositories/all.go` ‚Äî —É–¥–∞–ª—ë–Ω ModuleRepository
- `internal/migrations/migrations.go` ‚Äî —É–¥–∞–ª–µ–Ω–∞ chat_modules –∏–∑ ExpectedSchema
- `cmd/bot/modules.go` ‚Äî —É–±—Ä–∞–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è moduleRepo
- `cmd/bot/handlers.go` ‚Äî —É–¥–∞–ª–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã /enable, /disable, /modules
- `cmd/bot/pipeline.go` ‚Äî —É–±—Ä–∞–Ω—ã IsEnabled –ø—Ä–æ–≤–µ—Ä–∫–∏
- `internal/modules/*/*.go` ‚Äî —É–¥–∞–ª–µ–Ω—ã –ø–æ–ª—è moduleRepo –∏ IsEnabled –≤—ã–∑–æ–≤—ã (5 –º–æ–¥—É–ª–µ–π)

**–ú–∏–≥—Ä–∞—Ü–∏—è:** –ï—Å–ª–∏ —É –≤–∞—Å –±—ã–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ `chat_modules`, –ø—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã –º–æ–¥—É–ª–µ–π.

### ‚ú® –î–æ–±–∞–≤–ª–µ–Ω–æ

#### –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏ (Easter Eggs)

**–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è:** –†–µ–∞–∫—Ü–∏–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–ø–∞—Å—Ö–∞–ª–∫–∏ –≤ —Å—Ç–∏–ª–µ RTS bot)

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `user_id BIGINT DEFAULT NULL` –≤ —Ç–∞–±–ª–∏—Ü—É `keyword_reactions`
- ‚úÖ Fallback –ª–æ–≥–∏–∫–∞: `user+topic ‚Üí user+chat ‚Üí topic ‚Üí chat` (4 —É—Ä–æ–≤–Ω—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞)
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/addreaction user:<user_id> <pattern> <response>` –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö —Ä–µ–∞–∫—Ü–∏–π
- ‚úÖ –ü—É—Å—Ç–æ–π –ø–∞—Ç—Ç–µ—Ä–Ω (`""`) = —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ **–ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ `user_id` –≤ `/listreactions` –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö —Ä–µ–∞–∫—Ü–∏–π
- ‚úÖ Partial index –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏: `idx_keyword_reactions_user`

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```bash
# –ü–∞—Å—Ö–∞–ª–∫–∞ "@Astrolux, –æ–ø—è—Ç—å —Ç—ã —á—Ç–æ —Ç–æ —Å–ø—ã–ª–µ—Å–æ—Å–∏–ª!" –∏–∑ RTS bot
/addreaction user:303724504 "" "@Astrolux, –æ–ø—è—Ç—å —Ç—ã —á—Ç–æ —Ç–æ —Å–ø—ã–ª–µ—Å–æ—Å–∏–ª!" "–ü–∞—Å—Ö–∞–ª–∫–∞"
```

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- üìÑ `docs/PERSONAL_REACTIONS.md` ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- üìÑ `examples/personal_reaction_easter_egg.sql` ‚Äî SQL –ø—Ä–∏–º–µ—Ä—ã

**–ú–∏–≥—Ä–∞—Ü–∏—è –∏–∑ RTS bot:**
- –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞: `user_id='303724504'` + `regex='disable'` –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ
- –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞: `user_id=303724504` + `pattern=''` –≤ –µ–¥–∏–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ `keyword_reactions`

### üîÑ –ò–∑–º–µ–Ω–µ–Ω–æ

- **`reactions.go::loadReactions()`** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `userID int64` –∏ —Å–ª–æ–∂–Ω–∞—è fallback –ª–æ–≥–∏–∫–∞
- **`reactions.go::OnMessage()`** ‚Äî —É–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `msg.Text == ""` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ä–µ–∞–∫—Ü–∏–π –Ω–∞ —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ –±–µ–∑ —Ç–µ–∫—Å—Ç–∞
- **`reactions.go::handleAddReaction()`** ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ –ø—Ä–µ—Ñ–∏–∫—Å–∞ `user:<user_id>` –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—É—Å—Ç–æ–≥–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞
- **`reactions.go::handleListReactions()`** ‚Äî –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ `user_id` –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö —Ä–µ–∞–∫—Ü–∏–π
- **`migrations/001_initial_schema.sql`** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `user_id` + partial index

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–ø—Ä–∞–≤–∫–∞ `/reactions` —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö —Ä–µ–∞–∫—Ü–∏–π
- –°–æ–∑–¥–∞–Ω `PERSONAL_REACTIONS.md` —Å –ø–æ–ª–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- –°–æ–∑–¥–∞–Ω `personal_reaction_easter_egg.sql` —Å SQL –ø—Ä–∏–º–µ—Ä–∞–º–∏

---

## [0.8.0-dev] - 2025-11-10

### üóÑÔ∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –†–ï–§–ê–ö–¢–û–†–ò–ù–ì –ë–î ‚Äî –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã + –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–æ–ø–∏–∫–æ–≤

**–§–∏–ª–æ—Å–æ—Ñ–∏—è:** –û–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `messages` —Å JSONB metadata –≤–º–µ—Å—Ç–æ –¥–µ—Å—è—Ç–∫–∞ —Å—á—ë—Ç—á–∏–∫–æ–≤ + –Ω–∞—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–æ–ø–∏–∫–æ–≤ —á–µ—Ä–µ–∑ `thread_id`

**–ü—Ä–æ–±–ª–µ–º–∞ (v0.7):**
- 13 —Ç–∞–±–ª–∏—Ü (messages + content_counters + reaction_triggers + reaction_daily_counters –∏ —Ç.–¥.)
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (—Å—á—ë—Ç—á–∏–∫–∏ –∂–∏–≤—É—Ç –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π)
- –°–ª–æ–∂–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (–æ–±–Ω–æ–≤–∏—Ç—å —Å—á—ë—Ç—á–∏–∫ + –∑–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ)
- –ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç 2-3 —Ç–∞–±–ª–∏—Ü—ã
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ç–æ–ø–∏–∫–æ–≤ (Telegram Topics/Forums)**

**–†–µ—à–µ–Ω–∏–µ (v0.8):**
```
13 —Ç–∞–±–ª–∏—Ü ‚Üí 9 —Ç–∞–±–ª–∏—Ü + 2 MATERIALIZED VIEW
+ thread_id –≤ 6 —Ç–∞–±–ª–∏—Ü–∞—Ö –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ç–æ–ø–∏–∫–æ–≤
+ fallback –ª–æ–≥–∏–∫–∞: —Ç–æ–ø–∏–∫ ‚Üí —á–∞—Ç
```

#### ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—Ö–µ–º–µ –ë–î:

**–î–æ–±–∞–≤–ª–µ–Ω–æ (v0.8.0):**
- ‚úÖ `chats.is_forum BOOLEAN` ‚Äî —Ñ–ª–∞–≥ —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø—ã —Å —Ç–æ–ø–∏–∫–∞–º–∏
- ‚úÖ `messages.thread_id BIGINT DEFAULT 0` ‚Äî 0 = –æ—Å–Ω–æ–≤–Ω–æ–π —á–∞—Ç, >0 = —Ç–æ–ø–∏–∫
- ‚úÖ `content_limits.thread_id BIGINT DEFAULT 0` ‚Äî –ª–∏–º–∏—Ç—ã –Ω–∞ —Ç–æ–ø–∏–∫/—á–∞—Ç
- ‚úÖ `chat_vips.thread_id BIGINT DEFAULT 0` ‚Äî VIP –¥–ª—è —Ç–æ–ø–∏–∫–∞/—á–∞—Ç–∞
- ‚úÖ `keyword_reactions.thread_id BIGINT DEFAULT 0` ‚Äî —Ä–µ–∞–∫—Ü–∏–∏ –¥–ª—è —Ç–æ–ø–∏–∫–∞/—á–∞—Ç–∞
- ‚úÖ `banned_words.thread_id BIGINT DEFAULT 0` ‚Äî –±–∞–Ω-—Å–ª–æ–≤–∞ –¥–ª—è —Ç–æ–ø–∏–∫–∞/—á–∞—Ç–∞
- ‚úÖ `scheduled_tasks.thread_id BIGINT DEFAULT 0` ‚Äî –∑–∞–¥–∞—á–∏ –¥–ª—è —Ç–æ–ø–∏–∫–∞/—á–∞—Ç–∞
- ‚úÖ `messages.metadata JSONB DEFAULT '{}'` ‚Äî –º–æ–¥—É–ª–µ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ `CREATE INDEX idx_messages_metadata USING GIN (metadata)` ‚Äî –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫
- ‚úÖ `event_log.metadata JSONB` ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏–π

**–£–¥–∞–ª–µ–Ω–æ:**
- ‚ùå `chat_modules` (—Ç–∞–±–ª–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–¥—É–ª—è–º–∏) ‚Äî –º–æ–¥—É–ª–∏ —Ç–µ–ø–µ—Ä—å –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚ùå `content_counters` (17 –∫–æ–ª–æ–Ω–æ–∫, ~120 —Å—Ç—Ä–æ–∫ SQL) ‚Üí —Å—á–∏—Ç–∞–µ–º –∏–∑ `messages` —á–µ—Ä–µ–∑ GROUP BY
- ‚ùå `reaction_triggers` (cooldown —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `messages.metadata`)
- ‚ùå `reaction_daily_counters` ‚Üí –ø–æ–¥—Å—á—ë—Ç –∏–∑ `messages`

**–õ–æ–≥–∏–∫–∞ Fallback –¥–ª—è —Ç–æ–ø–∏–∫–æ–≤:**
1. `thread_id = 0` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º—É —á–∞—Ç—É
2. `thread_id > 0` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–ø–∏–∫–∞
3. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ç–æ–ø–∏–∫–∞ ‚Üí fallback –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–∞

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```sql
-- VIP –¥–ª—è –≤—Å–µ–≥–æ —á–∞—Ç–∞
INSERT INTO chat_vips (chat_id, thread_id, user_id) VALUES (-100123, 0, 456);

-- VIP —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–æ–ø–∏–∫–∞ #general (thread_id = 789)
INSERT INTO chat_vips (chat_id, thread_id, user_id) VALUES (-100123, 789, 456);

-- –õ–∏–º–∏—Ç –Ω–∞ GIF –¥–ª—è –≤—Å–µ–≥–æ —á–∞—Ç–∞: 5/–¥–µ–Ω—å
INSERT INTO content_limits (chat_id, thread_id, limit_animation) VALUES (-100123, 0, 5);

-- –õ–∏–º–∏—Ç –Ω–∞ GIF —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–æ–ø–∏–∫–∞ #memes: –±–µ–∑ –ª–∏–º–∏—Ç–∞
INSERT INTO content_limits (chat_id, thread_id, limit_animation) VALUES (-100123, 789, 0);
```

**–ü—Ä–∏–º–µ—Ä metadata —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**
```json
{
  "limiter": {
    "checked": true,
    "limit_hit": false,
    "daily_count": 5
  },
  "reactions": {
    "triggered": [123, 456],
    "cooldown_until": "2025-11-10T15:30:00Z"
  },
  "statistics": {
    "processed": true,
    "processing_time_ms": 12
  }
}
```

#### ‚úÖ –ö–æ–¥:

**–°–æ–∑–¥–∞–Ω–æ:**
- ‚úÖ `MessageRepository` (235 —Å—Ç—Ä–æ–∫) ‚Äî –µ–¥–∏–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å messages
  - `InsertMessage(chatID, threadID, ...)` ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å thread_id + metadata
  - `GetTodayCountByType(chatID, threadID, ...)` ‚Äî —Å—á—ë—Ç—á–∏–∫–∏ –¥–ª—è Limiter
  - `GetUserStats(chatID, threadID, ...)` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è Statistics
  - `GetChatTopUsers(chatID, threadID, ...)` ‚Äî —Ç–æ–ø –∞–∫—Ç–∏–≤–Ω—ã—Ö
  - `MarkDeleted()` ‚Äî –ø–æ–º–µ—á–∞–µ—Ç —É–¥–∞–ª—ë–Ω–Ω—ã–µ

**–û–±–Ω–æ–≤–ª–µ–Ω–æ:**
- ‚úÖ `VIPRepository.IsVIP(chatID, threadID, userID)` ‚Äî fallback: —Ç–æ–ø–∏–∫ ‚Üí —á–∞—Ç
- ‚úÖ `ContentLimitsRepository.GetLimits(chatID, threadID, userID)` ‚Äî fallback: (—Ç–æ–ø–∏–∫+user) ‚Üí (—Ç–æ–ø–∏–∫+all) ‚Üí (—á–∞—Ç+user) ‚Üí (—á–∞—Ç+all)
- ‚úÖ `Statistics module` ‚Äî –ø–µ—Ä–µ–¥–∞—ë—Ç `ctx.Message.ThreadID` –≤ MessageRepository, —Ä–∞–±–æ—Ç–∞–µ—Ç **–≤—Å–µ–≥–¥–∞** (–µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã)
  - –ö–æ–º–∞–Ω–¥–∞ `/mystats` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Ç–æ–ø–∏–∫–∞
  - TODO: `/myweek`, `/chatstats`, `/topchat` (–≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω—ã)

- ‚úÖ `Limiter module` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `messageRepo.GetTodayCountByType(chatID, threadID, ...)`
  - –õ–∏–º–∏—Ç—ã –∑–∞–¥–∞—é—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π `/setlimit` –≤ —Ç–æ–ø–∏–∫–µ ‚Üí –¥–µ–π—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–ø–∏–∫–µ
  - VIP —á–µ—Ä–µ–∑ `/setvip` –≤ —Ç–æ–ø–∏–∫–µ ‚Üí VIP —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–ø–∏–∫–µ
  - Fallback: –Ω–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ —Ç–æ–ø–∏–∫–µ ‚Üí –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–∞

- ‚úÖ `migrations.go` ‚Äî —É–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ (—Ç–æ–ª—å–∫–æ 001_initial_schema.sql)
  - ExpectedSchema –æ–±–Ω–æ–≤–ª—ë–Ω (thread_id –≤ 6 —Ç–∞–±–ª–∏—Ü–∞—Ö)

#### ‚úÖ Telegram API Integration:

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Message.ThreadID` –∏–∑ gopkg.in/telebot.v3
- ‚úÖ `threadID = 0` ‚Üí –æ—Å–Ω–æ–≤–Ω–æ–π —á–∞—Ç
- ‚úÖ `threadID > 0` ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ç–æ–ø–∏–∫–µ
  - –£–¥–∞–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `checkAndRunMigration002` (–±–æ–ª—å—à–µ –Ω–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ 002)
  - –û–±–Ω–æ–≤–ª—ë–Ω `ExpectedSchema` ‚Äî —É–±—Ä–∞–Ω—ã —Å—á—ë—Ç—á–∏–∫–∏

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- **–ì–∏–±–∫–æ—Å—Ç—å:** –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–ª—é—á –≤ metadata –±–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–π
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** GIN –∏–Ω–¥–µ–∫—Å—ã + MATERIALIZED VIEW –±—ã—Å—Ç—Ä–µ–µ —á–µ–º JOIN
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞:** –º–µ–Ω—å—à–µ —Ç–∞–±–ª–∏—Ü = –º–µ–Ω—å—à–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- **–ò—Å—Ç–∏–Ω–∞:** –æ–¥–Ω–æ –º–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
- –°—Ö–µ–º–∞ –ë–î —É–ø—Ä–æ—â–µ–Ω–∞ —Å 13 –¥–æ 9 —Ç–∞–±–ª–∏—Ü
- –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã ‚Äî `messages` —Å JSONB metadata
- MATERIALIZED VIEW –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é (–ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ + GIN)

---

## [0.7-simplified] - 2025-11-02

### üîß –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫–æ–¥–∞

**–ó–∞–¥–∞—á–∞ #9:** –Ø–≤–Ω—ã–π lifecycle –¥–ª—è scheduler + —É–¥–∞–ª–µ–Ω–∏–µ –º—ë—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ `scheduler.go`: –ú–µ—Ç–æ–¥ `Start()` –≤—ã–¥–µ–ª–µ–Ω –∏–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ `New()`
  - –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ç–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—ë—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä (–±–µ–∑ –∑–∞–ø—É—Å–∫–∞ cron)
  - –Ø–≤–Ω—ã–π –≤—ã–∑–æ–≤ `modules.Scheduler.Start()` –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ `modules.go`
  - Lifecycle: `New()` ‚Üí `Start()` ‚Üí `Shutdown()` (–ø—Ä–æ–∑—Ä–∞—á–µ–Ω –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º)

- ‚úÖ –£–¥–∞–ª—ë–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –º–µ—Ç–æ–¥ `Enabled()` –∏–∑ scheduler
  - –ó–∞–º–µ–Ω—ë–Ω –Ω–∞ –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤ `moduleRepo.IsEnabled()` –≤ `executeTask()`
  - –£–¥–∞–ª–µ–Ω–æ ~10 —Å—Ç—Ä–æ–∫ –∏–∑–±—ã—Ç–æ—á–Ω–æ–≥–æ –∫–æ–¥–∞

- ‚úÖ –£–¥–∞–ª—ë–Ω TODO –∏–∑ `limiter.go` (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É–∂–µ –≤ statistics –º–æ–¥—É–ª–µ)

- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω `.gitignore` ‚Äî —Ç–µ–ø–µ—Ä—å –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–∏ –≤ –∫–æ—Ä–Ω–µ:
  - `/bot*`, `/bmft*` (–ª—é–±—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã: bot_test, bmft_debug, –∏ —Ç.–¥.)
  - –ò—Å–∫–ª—é—á–µ–Ω—ã –ø–∞–ø–∫–∏: `cmd/bot/`, `internal/`

- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω `README.md` —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π (v0.7-simplified)
  - –£–±—Ä–∞–Ω–æ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ `Module Registry`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ —Å —è–≤–Ω—ã–º pipeline

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –Ω–µ –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å —Ñ–æ–Ω–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã (–ø—Ä–∏–Ω—Ü–∏–ø —è–≤–Ω–æ—Å—Ç–∏)
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –º–æ–º–µ–Ω—Ç —Å—Ç–∞—Ä—Ç–∞ scheduler
- –£–ø—Ä–æ—â–∞–µ—Ç unit-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫—É

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –Ø–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –≤–º–µ—Å—Ç–æ –º–∞–≥–∏–∏ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ

---

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥: –£–ø—Ä–æ—â–µ–Ω–∏–µ –º–æ–Ω–æ–ª–∏—Ç–∞ - 2025-11-02

**–§–∏–ª–æ—Å–æ—Ñ–∏—è:** –ü—Ä–∏–∑–Ω–∞—ë–º —á—Ç–æ —ç—Ç–æ –º–æ–Ω–æ–ª–∏—Ç –∏ —É–±–∏—Ä–∞–µ–º –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ enterprise-–∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**

#### 1. –£–¥–∞–ª—ë–Ω ModuleRegistry (~150 —Å—Ç—Ä–æ–∫)
- ‚ùå –£–¥–∞–ª—ë–Ω `internal/core/registry.go` ‚Äî –∏–∑–±—ã—Ç–æ—á–Ω–∞—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–ª—è monolith
- ‚ùå –£–¥–∞–ª—ë–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Module` –∏ `ModuleDependencies` –∏–∑ `interface.go`
- ‚úÖ –°–æ–∑–¥–∞–Ω `cmd/bot/pipeline.go` ‚Äî —è–≤–Ω—ã–π pipeline –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –°–æ–∑–¥–∞–Ω `cmd/bot/modules.go` ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã `registry.OnMessage()` –Ω–∞ `processMessage()`
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã `registry.GetModules()` –Ω–∞ —è–≤–Ω—ã–π `map[string][]BotCommand`
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã `registry.ShutdownAll()` –Ω–∞ `modules.shutdownModules()`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –Ø–≤–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–æ–¥—É–ª–µ–π (limiter ‚Üí textfilter ‚Üí statistics ‚Üí reactions)
- –í–∏–¥–Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å pipeline –±–µ–∑ –º–∞–≥–∏–∏ registry
- –ü—Ä–æ—â–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å ‚Äî breakpoint –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –º–æ–¥—É–ª–µ
- –ú–µ–Ω—å—à–µ –∫–æ–¥–∞, –±–æ–ª—å—à–µ –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤

#### 2. –£–±—Ä–∞–Ω in-memory cache –∏–∑ –º–æ–¥—É–ª–µ–π (~40 —Å—Ç—Ä–æ–∫)
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –ø–æ–ª—è `cache map[int64]` –∏ `lastLoad time.Time` –∏–∑:
  - `internal/modules/reactions/reactions.go`
  - `internal/modules/textfilter/textfilter.go`
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã `Init(deps ModuleDependencies)` –∏–∑ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π:
  - `limiter.go`, `scheduler.go`, `statistics.go`
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `scheduler.New()` –∑–∞–ø—É—Å–∫–∞–µ—Ç cron)
- ‚úÖ –¢–µ–ø–µ—Ä—å –¥–∞–Ω–Ω—ã–µ —á–∏—Ç–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –ë–î –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- State —Ç–µ—Ä—è–ª—Å—è –ø—Ä–∏ restart
- –ß—Ç–µ–Ω–∏–µ –∏–∑ –ë–î ~1-2ms ‚Äî –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- Monolith –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å stateless –¥–ª—è graceful restart

#### 3. –£–¥–∞–ª—ë–Ω RateLimitMiddleware (~15 —Å—Ç—Ä–æ–∫)
- ‚ùå –£–¥–∞–ª—ë–Ω `core.RateLimitMiddleware()` ‚Äî –±—ã–ª–∞ –∑–∞–≥–ª—É—à–∫–∞ TODO
- ‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ `LoggerMiddleware` –∏ `PanicRecoveryMiddleware`

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- Telegram —É–∂–µ –∏–º–µ–µ—Ç rate limiting –Ω–∞ —É—Ä–æ–≤–Ω–µ API
- –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å

#### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –°–æ–∑–¥–∞–Ω `docs/REFACTORING_PLAN.md` ‚Äî –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —É–ø—Ä–æ—â–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω `README.md` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ä–∞–∑–¥–µ–ª—ã —Å –º–æ–¥—É–ª—è–º–∏, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π, –∫–æ–º–∞–Ω–¥–∞–º–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –£–¥–∞–ª–µ–Ω–æ ~255 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ (registry.go 150 + cache 40 + middleware 15 + Init methods 50)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ ~185 —Å—Ç—Ä–æ–∫ (pipeline.go 68 + modules.go 117)
- ‚úÖ –ò—Ç–æ–≥–æ: **-70 —Å—Ç—Ä–æ–∫**, –Ω–æ –∫–æ–¥ —Å—Ç–∞–ª —á–∏—â–µ –∏ –ø–æ–Ω—è—Ç–Ω–µ–µ
- ‚úÖ –ü—Ä–æ–µ–∫—Ç –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –Ø–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤–º–µ—Å—Ç–æ DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–π flow –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

---

### üßπ –û—á–∏—Å—Ç–∫–∞ –∫–æ–¥–∞ - 2025-11-02 (–¥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞)

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ `settings.go`: `SetVersion()`, `SetTimezone()`, `GetTimezone()`
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏—è `IsActive()` –∏–∑ `chat_repository.go`
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ñ–∞–π–ª—ã `.DS_Store` –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω `README.md` —Å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ä–∞–∑–¥–µ–ª–∞–º–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£–¥–∞–ª–µ–Ω–æ ~50 —Å—Ç—Ä–æ–∫ –º—ë—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞

---

### –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è
- **Webhook Mode:** –ü–µ—Ä–µ—Ö–æ–¥ —Å Long Polling –Ω–∞ Webhook –¥–ª—è production
- **Redis:** –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Grafana:** –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- **CI/CD:** –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏ –¥–µ–ø–ª–æ–π

---

## [0.6.0-dev] - 2025-10-06

### üîÑ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –†–ï–§–ê–ö–¢–û–†–ò–ù–ì ‚Äî –£–ø—Ä–æ—â–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

**–§–∏–ª–æ—Å–æ—Ñ–∏—è:**
- –ù–∏—á–µ–≥–æ –Ω–µ —Ö–∞—Ä–¥–∫–æ–¥–∏–º - –≤—Å—ë —á–µ—Ä–µ–∑ –ë–î –∏ –∫–æ–º–∞–Ω–¥—ã –¢–ì
- –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ - –±–µ–∑ –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —á–∏—Å–µ–ª
- VIP —Å–∏—Å—Ç–µ–º–∞ - –æ–±—Ö–æ–¥ –≤—Å–µ—Ö –ª–∏–º–∏—Ç–æ–≤
- –ü–æ–Ω—è—Ç–Ω–æ—Å—Ç—å > —Å–ª–æ–∂–Ω–æ—Å—Ç—å

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- **VIP —Å–∏—Å—Ç–µ–º–∞:**
  - –¢–∞–±–ª–∏—Ü–∞ `chat_vips` - –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è VIP –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - VIP –æ–±—Ö–æ–¥—è—Ç –í–°–ï –ª–∏–º–∏—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
  - –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `VIPRepository` (145 —Å—Ç—Ä–æ–∫) —Å –º–µ—Ç–æ–¥–∞–º–∏: `IsVIP()`, `GrantVIP()`, `RevokeVIP()`, `ListVIPs()`
  - –ö–æ–º–∞–Ω–¥—ã: `/setvip @user [reason]`, `/removevip @user`, `/listvips`

- **–ù–æ–≤—ã–µ –ª–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç:**
  - –¢–∞–±–ª–∏—Ü–∞ `content_limits` —Å 12 –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞
  - –ó–Ω–∞—á–µ–Ω–∏—è: `-1` = –ó–ê–ü–†–ï–¢, `0` = –ë–ï–ó –õ–ò–ú–ò–¢–ê, `N` = –º–∞–∫—Å–∏–º—É–º N –≤ –¥–µ–Ω—å
  - –¢–∏–ø—ã: text, photo, video, sticker, animation, voice, video_note, audio, document, location, contact, banned_words
  - –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `ContentLimitsRepository` (280 —Å—Ç—Ä–æ–∫) —Å –º–µ—Ç–æ–¥–∞–º–∏: `GetLimits()`, `SetLimit()`, `GetCounter()`, `IncrementCounter()`
  - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è: "‚ö†Ô∏è –û—Å—Ç–∞–ª–æ—Å—å X –∏–∑ Y"

- **Keyword Reactions:**
  - –¢–∞–±–ª–∏—Ü–∞ `keyword_reactions` - –∞–≤—Ç–æ—Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ (regex/—Ç–µ–∫—Å—Ç)
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ cooldown (–∞–Ω—Ç–∏—Ñ–ª—É–¥) –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
  - –û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∞–∫—Ü–∏–π –¥–ª—è –∞–¥–º–∏–Ω–æ–≤, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 5 –º–∏–Ω—É—Ç
  - –ó–∞–º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ä—É—é –ª–æ–≥–∏–∫—É —Å violation codes (11,12,13)
  - –ö–æ–º–∞–Ω–¥—ã: `/addreaction <pattern> <response> <description>`, `/listreactions`, `/removereaction <id>`

- **Banned Words (Text Filter):**
  - –¢–∞–±–ª–∏—Ü–∞ `banned_words` - —Ñ–∏–ª—å—Ç—Ä –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã—Ö —Å–ª–æ–≤
  - –î–µ–π—Å—Ç–≤–∏—è: `delete`, `warn`, `delete_warn`
  - –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–µ—Ç —Å—á—ë—Ç—á–∏–∫ `banned_words` –≤ content_counters
  - –ó–∞–º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ä—É—é –ª–æ–≥–∏–∫—É violation code 21
  - –ö–æ–º–∞–Ω–¥—ã: `/addban <pattern> <action>`, `/listbans`, `/removeban <id>`

- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ –∏–∑ –ë–î:**
  - –¢–∞–±–ª–∏—Ü–∞ `bot_settings` - –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–≤–µ—Ä—Å–∏—è, —Ç–∞–π–º–∑–æ–Ω–∞, –º–æ–¥—É–ª–∏)
  - –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `SettingsRepository` (70 —Å—Ç—Ä–æ–∫)
  - –í–µ—Ä—Å–∏—è –±–æ—Ç–∞ —Ç–µ–ø–µ—Ä—å –±–µ—Ä—ë—Ç—Å—è –∏–∑ –ë–î, –∞ –Ω–µ —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç—Å—è

- **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–∞ –ë–î:**
  - –¢–∞–±–ª–∏—Ü–∞ `banned_words` - –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏
  - –î–µ–π—Å—Ç–≤–∏—è: warn, delete, mute, ban
  - –ó–∞–º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ä—É—é –ª–æ–≥–∏–∫—É —Å violation=21

- **Scheduler –Ω–∞ –ë–î:**
  - –¢–∞–±–ª–∏—Ü–∞ `scheduled_tasks` (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ —Å `scheduler_tasks`)
  - –ü–æ–ª—è: `cron_expression`, `action_type`, `action_data` (JSONB)
  - –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ –ë–î - –±–µ–∑ —Ö–∞—Ä–¥–∫–æ–¥–∞ –≤ –∫–æ–¥–µ
  - –û–±–Ω–æ–≤–ª—ë–Ω `SchedulerRepository`

### Changed

- üóÑÔ∏è **Database Schema v0.6.0:**
  - –£–±—Ä–∞–Ω—ã –º–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞ `violation` (11,12,13,21)
  - –õ–∏–º–∏—Ç—ã: –≤–º–µ—Å—Ç–æ `limiter_config` —Å content_type ‚Üí `content_limits` —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –ø–æ–ª—è–º–∏
  - –°—á—ë—Ç—á–∏–∫–∏: `content_counters` —Å –ø–æ–ª—è–º–∏ count_text, count_photo, –∏ —Ç.–¥.
  - –ü–∞—Ä—Ç–∏—Ü–∏–∏ messages: –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞ 3 –º–µ—Å—è—Ü–∞ –≤–ø–µ—Ä—ë–¥

- ÔøΩ **–ú–æ–¥—É–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω—ã:**
  - `internal/modules/limiter/` (329 —Å—Ç—Ä–æ–∫) - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è VIP + ContentLimits
  - `internal/modules/reactions/` (289 —Å—Ç—Ä–æ–∫) - keyword_reactions, –∫—ç—à, cooldown
  - `internal/modules/textfilter/` (283 —Å—Ç—Ä–æ–∫–∏, –ù–û–í–´–ô) - banned_words —Ñ–∏–ª—å—Ç—Ä
  - `internal/modules/statistics/` - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (—É–∂–µ –≥–æ—Ç–æ–≤)
  - `internal/modules/scheduler/` - –æ–±–Ω–æ–≤–ª—ë–Ω –Ω–∞ scheduled_tasks

- ÔøΩüìù **Version:** `0.5` ‚Üí `0.6.0-dev` (–∏–∑ –ë–î —á–µ—Ä–µ–∑ SettingsRepository)

### Removed

- ‚ùå –°—Ç–∞—Ä–∞—è —Ç–∞–±–ª–∏—Ü–∞ `limiter_config` (–∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ `content_limits`)
- ‚ùå –°—Ç–∞—Ä–∞—è —Ç–∞–±–ª–∏—Ü–∞ `scheduler_tasks` (–∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ `scheduled_tasks`)
- ‚ùå –î—É–±–ª–∏—Ä—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ `statistics_daily` (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —á–µ—Ä–µ–∑ `content_counters`)
- ‚ùå –ú–µ—Ä—Ç–≤—ã–π –∫–æ–¥ `limit_repository.go` + —Ç–µ—Å—Ç—ã (–∑–∞–º–µ–Ω–µ–Ω –Ω–∞ `content_limits.go`)
- ‚ùå –ú–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞ violation (11=–∞–º–∏–≥–∞, 12=–ø–æ—Ö–º–µ–ª—å–µ, 21=–º–∞—Ç)
- ‚ùå –•–∞—Ä–¥–∫–æ–¥ –≤–µ—Ä—Å–∏–∏ –±–æ—Ç–∞ –≤ main.go
- ‚ùå –•–∞—Ä–¥–∫–æ–¥ –∑–∞–¥–∞—á scheduler –≤ –∫–æ–¥–µ
- ‚ùå –§–∞–π–ª—ã `docs/ANALYSIS.md`, `docs/ROADMAP.md` (—É—Å—Ç–∞—Ä–µ–ª–∏)

### Migration Notes

‚ö†Ô∏è **BREAKING CHANGES:** –°—Ö–µ–º–∞ –ë–î –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–∞

–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
```bash
# 1. –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é –ë–î (–¥–∞–Ω–Ω—ã–µ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã –≤ dev)
docker-compose down -v

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –Ω–æ–≤–æ–π —Å—Ö–µ–º–æ–π
docker-compose up -d

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
docker-compose logs bot | grep "initial migration completed successfully"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ (06.01.2025):**
- ‚úÖ –í—Å–µ 14 —Ç–∞–±–ª–∏—Ü —Å–æ–∑–¥–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ (—É–±—Ä–∞–ª–∏ –¥—É–±–ª–∏—Ä—É—é—â—É—é statistics_daily)
- ‚úÖ –í—Å–µ 5 –º–æ–¥—É–ª–µ–π –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã (limiter, reactions, textfilter, statistics, scheduler)
- ‚úÖ VIP —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Content Limits —Ä–∞–±–æ—Ç–∞—é—Ç (12 —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞)
- ‚úÖ Keyword Reactions —Ä–∞–±–æ—Ç–∞—é—Ç (regex + cooldown)
- ‚úÖ Banned Words Filter —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Statistics —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ content_counters (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- ‚úÖ Schema validation –ø—Ä–æ–π–¥–µ–Ω–∞
- ‚úÖ –£–¥–∞–ª–µ–Ω –º–µ—Ä—Ç–≤—ã–π –∫–æ–¥ (—Å—Ç–∞—Ä—ã–π LimitRepository)
- ‚úÖ –í—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –≤—Å–µ –ª–æ–≥–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
- ‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –±–µ–∑ –æ—à–∏–±–æ–∫

### Refactoring (06.01.2025)

**–ü—Ä–æ–±–ª–µ–º–∞:** –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ—à–∏–±–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
1. `reactions` –º–æ–¥—É–ª—å –ø–∞–¥–∞–ª —Å –æ—à–∏–±–∫–æ–π `column "cooldown_seconds" does not exist`
2. `statistics` –º–æ–¥—É–ª—å –ø–∞–¥–∞–ª —Å –æ—à–∏–±–∫–æ–π `relation "statistics_daily" does not exist`
3. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É `statistics_daily` –∏ `content_counters`
4. –ú–µ—Ä—Ç–≤—ã–π –∫–æ–¥ `limit_repository.go` (—Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

**–†–µ—à–µ–Ω–∏–µ:**
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `reactions.go` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ `cooldown`
2. ‚úÖ –£–¥–∞–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `statistics_daily` –∏–∑ —Å—Ö–µ–º—ã –ë–î
3. ‚úÖ –ü–µ—Ä–µ–ø–∏—Å–∞–Ω `statistics_repository.go` - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `content_counters` –Ω–∞–ø—Ä—è–º—É—é
4. ‚úÖ –£–¥–∞–ª–µ–Ω –º–µ—Ä—Ç–≤—ã–π –∫–æ–¥ `limit_repository.go` + `limit_repository_test.go` (588 —Å—Ç—Ä–æ–∫)
5. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `ExpectedSchema` –≤ `migrations.go` - —É–±—Ä–∞–Ω–æ `statistics_daily`
6. ‚úÖ –í—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –≤—Å–µ –ª–æ–≥–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ)
7. ‚úÖ –ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (README, CHANGELOG, docs/)

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ v0.6.0 (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è):**
- `messages` - —Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –º–µ—Å—è—Ü–∞–º)
- `content_counters` - –¥–Ω–µ–≤–Ω—ã–µ —Å—á–µ—Ç—á–∏–∫–∏ –ø–æ —Ç–∏–ø–∞–º –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (12 –ø–æ–ª–µ–π)
- `statistics_repository` - –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `content_counters` –Ω–∞ –ª–µ—Ç—É

### Technical Details

**–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- `internal/postgresql/repositories/vip.go` (145 —Å—Ç—Ä–æ–∫)
- `internal/postgresql/repositories/content_limits.go` (280 —Å—Ç—Ä–æ–∫)
- `internal/postgresql/repositories/settings.go` (70 —Å—Ç—Ä–æ–∫)
- `internal/modules/textfilter/textfilter.go` (283 —Å—Ç—Ä–æ–∫–∏)
- `docs/QUICK_START.md` (350+ —Å—Ç—Ä–æ–∫) - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `docs/TESTING_SHORT.md` (150+ —Å—Ç—Ä–æ–∫) - –∫—Ä–∞—Ç–∫–∏–π —á–µ–∫–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `docs/TERMINAL_CHEATSHEET.md` (200+ —Å—Ç—Ä–æ–∫) - –∫–æ–º–∞–Ω–¥—ã —Ç–µ—Ä–º–∏–Ω–∞–ª–∞

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `internal/modules/limiter/limiter.go` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω
- `internal/modules/reactions/reactions.go` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –±–∞–≥
- `internal/modules/statistics/statistics.go` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- `internal/postgresql/repositories/statistics_repository.go` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –Ω–∞ `content_counters`
- `internal/postgresql/repositories/scheduler_repository.go` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–ø—Ä–æ—Å—ã
- `internal/migrations/migrations.go` - —É–±—Ä–∞–Ω–æ `statistics_daily` –∏–∑ ExpectedSchema
- `migrations/001_initial_schema.sql` (179 —Å—Ç—Ä–æ–∫) - —É–±—Ä–∞–Ω–∞ `statistics_daily`
- `cmd/bot/main.go` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–¥–∞:**
- –ù–∞–ø–∏—Å–∞–Ω–æ: ~2200 —Å—Ç—Ä–æ–∫ Go –∫–æ–¥–∞ + –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –£–¥–∞–ª–µ–Ω–æ: ~1400 —Å—Ç—Ä–æ–∫ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ/–º–µ—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞
- –°—Ö–µ–º–∞ –ë–î: 14 —Ç–∞–±–ª–∏—Ü (–±—ã–ª–æ 15), 13 –∏–Ω–¥–µ–∫—Å–æ–≤, –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

---

## [0.6.0] - 2025-10-06 (old)

### Changed
- üöÄ **Bot Init:** `internal/bot/init.go` ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram –±–æ—Ç–∞
- üìù **Logging:** –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ —Å —É—Ä–æ–≤–Ω—è–º–∏ (ERROR, WARN, INFO, DEBUG)

### Added
- **Limiter:**
  - –õ–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç (—Ç–µ–∫—Å—Ç, —Ñ–æ—Ç–æ, —Å—Ç–∏–∫–µ—Ä—ã, –≥–æ–ª–æ—Å–æ–≤—ã–µ)
  - –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`/mycontentusage`)
  - –ö–æ–º–∞–Ω–¥—ã: `/setcontentlimit`, `/mycontentusage`, `/listcontentlimits`

- **Reactions:**
  - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –Ω–æ–≤—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (welcome/goodbye messages)
  - –°–ª—É—á–∞–π–Ω—ã–µ —Å—Ç–∏–∫–µ—Ä—ã/—Ñ–æ—Ç–æ –Ω–∞ –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
  - –í–µ—Ä—Å–∏–æ–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ `/version`

- **Statistics:**
  - –ö–æ–º–∞–Ω–¥—ã: `/activestats`, `/totalmessages`

### Fixed
- ‚úÖ **Graceful Shutdown:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å context.Context
- ‚úÖ **Telegram Polling:** –£–±—Ä–∞–Ω legacy `bot.Start()`

---

## [0.5.0] - 2025-10-05

### Added
- üß© **Module Registry:** Plugin-based –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
  - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä –º–æ–¥—É–ª–µ–π –≤ `internal/modules/registry.go`
  - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ `RegisterAllModules()`
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ–¥—É–ª–µ–π: `limiter`, `reactions`, `statistics`, `scheduler`, `chatexport`

- **Violations (Regex Reactions):**
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ regex-–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Å violation=21
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ —Å–ª–æ–≤–∞/—Ñ—Ä–∞–∑—ã
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `db.GetAllActiveRegexPatterns()`

- **Edit Handler:**
  - –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ —Ç—É –∂–µ –ª–æ–≥–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤, regex-–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### Changed
- üìÅ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞:
  - `internal/bot/` ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram-–±–æ—Ç–∞
  - `internal/handlers/` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
  - `internal/modules/` ‚Äî –º–æ–¥—É–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

---

## [0.4.1] - 2025-10-04

### Fixed
- ‚úÖ SQL —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –æ—à–∏–±–∫–∞ –≤ `limiter_config` UNIQUE constraint
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π volume mount –¥–ª—è `migrations/`

### Known Issues
- ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç VIP —Å–∏—Å—Ç–µ–º–∞ (–æ–±—Ö–æ–¥ –ª–∏–º–∏—Ç–æ–≤ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤)

---

## [0.4.0] - 2025-10-04

### Added
- ‚úÖ **–ü–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω** ‚Äî –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

- **Scheduler (–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á):**
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `file_id` –¥–ª—è —Å—Ç–∏–∫–µ—Ä–æ–≤/—Ñ–æ—Ç–æ (–±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª—ã)
  - –ö–æ–º–∞–Ω–¥—ã: `/schedule`, `/listtasks`, `/deletetask`
  - Cron-—Ñ–æ—Ä–º–∞—Ç –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á

- **ChatExport (–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö):**
  - –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —á–∞—Ç–∞ –≤ CSV
  - –ö–æ–º–∞–Ω–¥–∞: `/exportchat`

- **Limiter (–õ–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç):**
  - –õ–∏–º–∏—Ç—ã –Ω–∞ —Ç–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (—Ç–µ–∫—Å—Ç, —Å—Ç–∏–∫–µ—Ä—ã, —Ñ–æ—Ç–æ, –≥–æ–ª–æ—Å–æ–≤—ã–µ)
  - –ö–æ–º–∞–Ω–¥—ã: `/setcontentlimit`, `/mycontentusage`, `/listcontentlimits`

- **Statistics (–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞):**
  - –ö–æ–º–∞–Ω–¥—ã: `/activestats`, `/totalmessages`

### Changed
- üöÄ **Docker Compose:** –û–±–Ω–æ–≤–ª—ë–Ω `docker-compose.yml` —Å –∞–≤—Ç–æ–º–∏–≥—Ä–∞—Ü–∏—è–º–∏
- üìù **Migrations:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ SQL-–º–∏–≥—Ä–∞—Ü–∏–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- üîß **Config:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `config/config.json` —Å database credentials

### Technical Implementation
- –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PostgreSQL 16
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ volume mount
- Graceful shutdown —Å `context.Context`

---

## [0.3.1] - 2025-10-03

### Fixed
- ‚úÖ Docker volume mount –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π
- ‚úÖ PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `host.docker.internal`

---

## [0.3.0] - 2025-10-03

### Added
- üìÅ **migrations/:** SQL-–º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ö–µ–º—ã –ë–î
- üìù **migrations/README.md:** –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∞–≤—Ç–æ–º–∏–≥—Ä–∞—Ü–∏—è–º
- üê≥ **docker-compose.yml:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è —Å PostgreSQL 16

- **Scheduler Module:**
  - `/schedule <time> <message>` ‚Äî –û—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
  - `/schedule <cron> <message>` ‚Äî –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ (cron-—Ñ–æ—Ä–º–∞—Ç)
  - `/listtasks` ‚Äî –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–¥–∞—á –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –≤ —á–∞—Ç–µ

---

## [0.2.0] - 2025-10-02

### Added
- üóÑÔ∏è **PostgreSQL Integration:**
  - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏, –ª–∏–º–∏—Ç–æ–≤, –Ω–∞—Å—Ç—Ä–æ–µ–∫
  - –ú–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `migrations/001_initial_schema.sql`

- **Commands:**
  - `/version` ‚Äî –í–µ—Ä—Å–∏—è –±–æ—Ç–∞ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ
  - `/activestats` ‚Äî –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
  - `/totalmessages` ‚Äî –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ

### Changed
- –ü–µ—Ä–µ—Ö–æ–¥ –æ—Ç In-Memory –∫ PostgreSQL –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

---

## [0.1.0] - 2025-10-01

### Added
- üéâ **–ü–µ—Ä–≤—ã–π —Ä–µ–ª–∏–∑!**
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ Go
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram Bot API —á–µ—Ä–µ–∑ `telebot.v3`
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ JSON

---

## Versioning Strategy

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç [Semantic Versioning](https://semver.org/lang/ru/):

- **MAJOR (X.0.0):** –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è API, –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∏
- **MINOR (0.X.0):** –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- **PATCH (0.0.X):** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤, –º–µ–ª–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:** Alpha (v0.x.x) ‚Äî –∞–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, API –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è.
