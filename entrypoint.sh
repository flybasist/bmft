#!/bin/sh
# ============================================================================
# entrypoint.sh ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ BMFT –±–æ—Ç–∞
# ============================================================================
# –°–æ–∑–¥–∞—ë—Ç –ø–∞–ø–∫—É logs —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –±–æ—Ç–∞
# ============================================================================

set -e

echo "üöÄ Starting BMFT Bot..."

# –°–æ–∑–¥–∞—ë–º –ø–∞–ø–∫—É logs –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
mkdir -p /app/logs

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∞–≤–∞ –Ω–∞ –ø–∞–ø–∫—É logs –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è bmft (UID 1000)
chown -R bmft:bmft /app/logs
chmod -R 755 /app/logs

echo "‚úÖ Logs directory prepared: /app/logs"

# –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è bmft –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
exec su-exec bmft /app/bot "$@"
