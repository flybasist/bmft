#!/bin/bash
# ============================================================================
# prepare-debian-host.sh ‚Äî –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Debian —Ö–æ—Å—Ç–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ BMFT –±–æ—Ç–∞
# ============================================================================
# –°–æ–∑–¥–∞—ë—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
# –ó–∞–ø—É—Å–∫–∞—Ç—å –Ω–∞ Debian —Ö–æ—Å—Ç–µ –ø–µ—Ä–µ–¥ docker-compose up
# ============================================================================

set -e

echo "üîß –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –¥–ª—è BMFT –±–æ—Ç–∞..."

# –°–æ–∑–¥–∞—ë–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫ –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
mkdir -p data/logs
mkdir -p data/postgres
mkdir -p migrations

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (UID/GID 1000 = –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å bmft –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ)
chown -R 1000:1000 data/logs
chmod -R 755 data/logs

echo "‚úÖ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã:"
ls -la data/

echo ""
echo "–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å:"
echo "  docker-compose -f docker-compose.env.yaml up -d"
echo "  docker-compose -f docker-compose.bot.yaml up -d"
