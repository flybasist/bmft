# BMFT - Bot Moderator For Telegram 

üìñ **–û –ø—Ä–æ–µ–∫—Ç–µ**

BMFT ‚Äî –º–æ–¥—É–ª—å–Ω—ã–π –±–æ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Telegram-—á–∞—Ç–∞–º–∏ —Å —É–ø—Ä–æ—â—ë–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π.

- üß© **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** ‚Äî –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –º–æ–¥—É–ª–∏ (–ª–∏–º–∏—Ç–µ—Ä, —Ä–µ–∞–∫—Ü–∏–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –¥—Ä.)
- üéõÔ∏è **Per-chat —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** ‚Äî –∞–¥–º–∏–Ω—ã –≤–∫–ª—é—á–∞—é—Ç/–≤—ã–∫–ª—é—á–∞—é—Ç –º–æ–¥—É–ª–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏
- üóÑÔ∏è **PostgreSQL 16+** ‚Äî –µ–¥–∏–Ω–∞—è –ë–î —Å JSONB metadata –∏ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- ÔøΩ **MATERIALIZED VIEW** ‚Äî –±—ã—Å—Ç—Ä–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- ÔøΩüì° **Long Polling** ‚Äî –±–µ–∑ webhook –∏ –ø—É–±–ª–∏—á–Ω–æ–≥–æ IP
- üê≥ **Docker-ready** ‚Äî –ø—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

> üü° **–°—Ç–∞—Ç—É—Å:** Alpha. –ê–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞.  
> **–í–µ—Ä—Å–∏—è:** 0.8.0-dev

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (v0.8) —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ç–æ–ø–∏–∫–æ–≤

**–£–ø—Ä–æ—â—ë–Ω–Ω—ã–π –º–æ–Ω–æ–ª–∏—Ç** ‚Äî —è–≤–Ω—ã–π pipeline + –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã + –Ω–∞—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Telegram Topics

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ        Telegram API         ‚îÇ
‚îÇ  (Topics/Forums support)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ Long Polling
              ‚îÇ Message.ThreadID
              ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   Bot (telebot.v3)  ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
             ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
             ‚îÇ Pipeline‚îÇ ‚Üê –Ø–≤–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫: limiter‚Üítextfilter‚Üístatistics‚Üíreactions
             ‚îÇ (cmd/   ‚îÇ   –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è per-chat/per-topic —á–µ—Ä–µ–∑ chat_modules (–ë–î)
             ‚îÇ  bot/)  ‚îÇ   thread_id = 0 ‚Üí –≤–µ—Å—å —á–∞—Ç, >0 ‚Üí –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–æ–ø–∏–∫
             ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     ‚ñº            ‚ñº            ‚ñº            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Limiter ‚îÇ ‚îÇTextFilter‚îÇ ‚îÇStatistics‚îÇ ‚îÇReactions ‚îÇ
‚îÇ (VIP    ‚îÇ ‚îÇ (banned  ‚îÇ ‚îÇ (messages‚îÇ ‚îÇ (keyword ‚îÇ
‚îÇ  bypass)‚îÇ ‚îÇ  words)  ‚îÇ ‚îÇ metadata)‚îÇ ‚îÇ  reply)  ‚îÇ
‚îÇ +topics)‚îÇ ‚îÇ +topics) ‚îÇ ‚îÇ +topics) ‚îÇ ‚îÇ +topics) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
                  ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ MessageRepository        ‚îÇ ‚Üê –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã
        ‚îÇ ‚úÖ InsertMessage()       ‚îÇ   –í—Å–µ –º–æ–¥—É–ª–∏ –ø–∏—à—É—Ç —Å—é–¥–∞
        ‚îÇ    (chatID, threadID)    ‚îÇ   —Å JSONB metadata
        ‚îÇ ‚úÖ GetTodayCountByType() ‚îÇ   + thread_id –¥–ª—è —Ç–æ–ø–∏–∫–æ–≤
        ‚îÇ ‚úÖ GetUserStats()        ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ    PostgreSQL 16+        ‚îÇ
        ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
        ‚îÇ  ‚îÇ messages (JSONB)    ‚îÇ ‚îÇ ‚Üê –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –º–µ—Å—è—Ü–∞–º
        ‚îÇ  ‚îÇ thread_id BIGINT    ‚îÇ ‚îÇ   0 = –æ—Å–Ω–æ–≤–Ω–æ–π —á–∞—Ç
        ‚îÇ  ‚îÇ metadata: {         ‚îÇ ‚îÇ   >0 = –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–æ–ø–∏–∫
        ‚îÇ  ‚îÇ   "limiter": {...}, ‚îÇ ‚îÇ
        ‚îÇ  ‚îÇ   "statistics": {}  ‚îÇ ‚îÇ
        ‚îÇ  ‚îÇ }                   ‚îÇ ‚îÇ
        ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
        ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
        ‚îÇ  ‚îÇ MATERIALIZED VIEW   ‚îÇ ‚îÇ ‚Üê –ë—ã—Å—Ç—Ä–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
        ‚îÇ  ‚îÇ daily_content_stats ‚îÇ ‚îÇ   (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ cron)
        ‚îÇ  ‚îÇ (with thread_id)    ‚îÇ ‚îÇ
        ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (v0.8):**
- ‚úÖ **–ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã:** `messages` —Å JSONB metadata –≤–º–µ—Å—Ç–æ —Å—á—ë—Ç—á–∏–∫–æ–≤
- ‚úÖ **9 —Ç–∞–±–ª–∏—Ü –≤–º–µ—Å—Ç–æ 13** (—É–¥–∞–ª–µ–Ω—ã content_counters, reaction_triggers, etc.)
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–æ–ø–∏–∫–æ–≤:** `thread_id` –≤ 6 —Ç–∞–±–ª–∏—Ü–∞—Ö (messages, chat_modules, content_limits, chat_vips, keyword_reactions, banned_words)
- ‚úÖ **Fallback –ª–æ–≥–∏–∫–∞:** —Ç–æ–ø–∏–∫ ‚Üí —á–∞—Ç (–Ω–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ —Ç–æ–ø–∏–∫–µ ‚Üí –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–∞)
- ‚úÖ **MATERIALIZED VIEW** –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–±—ã—Å—Ç—Ä–µ–µ —á–µ–º GROUP BY –≤ —Ä–µ–∞–ª—Ç–∞–π–º–µ)
- ‚úÖ **MessageRepository** ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- ‚úÖ **GIN –∏–Ω–¥–µ–∫—Å—ã** –Ω–∞ JSONB –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–°—Ö–µ–º–∞ v0.8.0 (9 —Ç–∞–±–ª–∏—Ü + 2 MATERIALIZED VIEW):**

| –¢–∞–±–ª–∏—Ü–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –¢–æ–ø–∏–∫–∏ |
|---------|------------|--------|
| `chats` | –†–µ–µ—Å—Ç—Ä —á–∞—Ç–æ–≤ | `is_forum` —Ñ–ª–∞–≥ |
| `users` | –†–µ–µ—Å—Ç—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | - |
| `chat_vips` | VIP-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–æ–±—Ö–æ–¥ –ª–∏–º–∏—Ç–æ–≤) | `thread_id` |
| `chat_modules` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π per-chat/per-topic | `thread_id` |
| `messages` + –ø–∞—Ä—Ç–∏—Ü–∏–∏ | **–ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã** —Å JSONB metadata | `thread_id` |
| `content_limits` | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–∏–º–∏—Ç–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ | `thread_id` |
| `keyword_reactions` | –ê–≤—Ç–æ—Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ | `thread_id` |
| `banned_words` | –§–∏–ª—å—Ç—Ä –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã—Ö —Å–ª–æ–≤ | `thread_id` |
| `scheduled_tasks` | –ó–∞–¥–∞—á–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (cron) | - |
| `event_log` | –ê—É–¥–∏—Ç —Å–æ–±—ã—Ç–∏–π —Å JSONB metadata | - |
| `bot_settings` | –í–µ—Ä—Å–∏—è –±–æ—Ç–∞, timezone, –º–æ–¥—É–ª–∏ | - |

**MATERIALIZED VIEW:**
- `daily_content_stats` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (—Å `thread_id`)
- `daily_reaction_stats` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∞–∫—Ü–∏–π (—Å `thread_id`)

**–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å —Ç–æ–ø–∏–∫–∞–º–∏:**
- `thread_id = 0` ‚Üí –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º—É —á–∞—Ç—É
- `thread_id > 0` ‚Üí –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–ø–∏–∫–∞
- –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ç–æ–ø–∏–∫–∞ ‚Üí fallback –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–∞
- –ü—Ä–∏–º–µ—Ä—ã: VIP –≤ —Ç–æ–ø–∏–∫–µ #general, –ª–∏–º–∏—Ç –Ω–∞ GIF –≤ —Ç–æ–ø–∏–∫–µ #memes

## üì¶ –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥—É–ª–∏

| –ú–æ–¥—É–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ | –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã |
|--------|----------|------------------|
| **Limiter** | –õ–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç —Å VIP-–æ–±—Ö–æ–¥–æ–º | `/setlimit`, `/mylimits`, `/setvip` |
| **Reactions** | –ê–≤—Ç–æ—Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ | `/addreaction`, `/listreactions` |
| **Statistics** | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | `/mystats`, `/myweek`, `/topweek` |
| **Scheduler** | –ó–∞–¥–∞—á–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (cron) | `/addtask`, `/listtasks` |
| **TextFilter** | –§–∏–ª—å—Ç—Ä –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã—Ö —Å–ª–æ–≤ | `/addban`, `/listbans` |

–í—Å–µ –º–æ–¥—É–ª–∏ –≤–∫–ª—é—á–∞—é—Ç—Å—è/–≤—ã–∫–ª—é—á–∞—é—Ç—Å—è –∞–¥–º–∏–Ω–∞–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏ `/enable <module>` –∏ `/disable <module>`.

---

## ÔøΩüöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker –∏ Docker Compose
- Telegram Bot Token –æ—Ç [@BotFather](https://t.me/BotFather)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ
git clone <repository-url>
cd bmft
cp .env.example .env  # –£–∫–∞–∂–∏—Ç–µ TELEGRAM_BOT_TOKEN

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ
docker-compose -f docker-compose.env.yaml up -d  # PostgreSQL
docker-compose -f docker-compose.bot.yaml up -d  # –ë–æ—Ç

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ
docker logs -f bmft_bot
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:

```bash
# Telegram Bot Token –æ—Ç @BotFather
TELEGRAM_BOT_TOKEN=your_token_here

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
POSTGRES_DSN=postgres://bmft:password@postgres:5432/bmft?sslmode=disable

# –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è: debug, info, warn, error
LOG_LEVEL=info

# Pretty print –ª–æ–≥–æ–≤ (true –¥–ª—è dev, false –¥–ª—è prod)
LOG_PRETTY=true

# –¢–∞–π–º–∞—É—Ç polling (—Å–µ–∫—É–Ω–¥—ã)
POLLING_TIMEOUT=60

# –¢–∞–π–º–∞—É—Ç graceful shutdown (—Å–µ–∫—É–Ω–¥—ã)
SHUTDOWN_TIMEOUT=30

# –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å
TZ=Europe/Moscow
```

---

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –î–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- `/start` ‚Äî –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
- `/help` ‚Äî —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥
- `/modules` ‚Äî –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥—É–ª–∏
- `/mystats` ‚Äî –≤–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `/myweek`, `/mymonth` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥
- `/mylimits` ‚Äî –≤–∞—à–∏ –ª–∏–º–∏—Ç—ã

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
- `/enable <module>` ‚Äî –≤–∫–ª—é—á–∏—Ç—å –º–æ–¥—É–ª—å
- `/disable <module>` ‚Äî –≤—ã–∫–ª—é—á–∏—Ç—å –º–æ–¥—É–ª—å
- `/setlimit <type> <limit>` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–∏–º–∏—Ç –Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç
- `/setvip @user` ‚Äî –¥–∞—Ç—å VIP —Å—Ç–∞—Ç—É—Å (–æ–±—Ö–æ–¥ –≤—Å–µ—Ö –ª–∏–º–∏—Ç–æ–≤)
- `/addreaction <—Å–ª–æ–≤–æ> <–æ—Ç–≤–µ—Ç>` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ—Ä–µ–∞–∫—Ü–∏—é
- `/addban <—Å–ª–æ–≤–æ>` ‚Äî –∑–∞–±–∞–Ω–∏—Ç—å —Å–ª–æ–≤–æ
- `/addtask <cron> <—Ç–µ–∫—Å—Ç>` ‚Äî —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é

**–ü–æ–¥—Å–∫–∞–∑–∫–∞:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ reply –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å `/addreaction` –∏–ª–∏ `/addtask` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (—Å—Ç–∏–∫–µ—Ä, —Ñ–æ—Ç–æ, –∏ —Ç.–¥.).

---

## üìß –ö–æ–Ω—Ç–∞–∫—Ç—ã

- GitHub: [@flybasist](https://github.com/flybasist)
- Telegram: [@flybasist](https://t.me/flybasist)
- Email: flybasist92@gmail.com

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π GNU GPLv3.

–í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å —ç—Ç–æ—Ç –∫–æ–¥, –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ —Ä–∞–±–æ—Ç—ã —Ç–∞–∫–∂–µ –±—É–¥—É—Ç –æ—Ç–∫—Ä—ã—Ç—ã –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π GPLv3. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –µ—Å–ª–∏ –≤—ã –≤–Ω–æ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é, –≤—ã –æ–±—è–∑–∞–Ω—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —ç—Ç–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π.

–í —Å–ª—É—á–∞–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ –≤–Ω—É—Ç—Ä–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –±–µ–∑ –µ–≥–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è ‚Äî —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

–ê–≤—Ç–æ—Ä: Alexander Ognev (aka FlyBasist)
–ì–æ–¥: 2025

‚≠ê –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –æ–∫–∞–∑–∞–ª—Å—è –ø–æ–ª–µ–∑–µ–Ω ‚Äî –ø–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥—É –Ω–∞ GitHub! ‚≠ê

üá∫üá∏ English

This project is licensed under the GNU GPLv3.

You are free to use, modify, and distribute this code under the condition that any derivative works are also licensed under GPLv3. This means if you make changes and distribute your modified version, you must make the source code of those changes available.

If you use the code within your organization without distributing it externally, you are not required to disclose your modifications.

Author: Alexander Ognev (aka FlyBasist), 2025