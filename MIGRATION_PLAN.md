# –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏: Python ‚Üí Go (–º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)

## –§–∞–∑–∞ 0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã ‚úÖ

- [x] –ê—É–¥–∏—Ç Python –ø—Ä–æ–µ–∫—Ç–∞ (rts_bot)
- [x] –ê–Ω–∞–ª–∏–∑ –±–æ–µ–≤–æ–π –ë–î (rtsbot.db)
- [x] –î–∏–∑–∞–π–Ω –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π SQL —Å—Ö–µ–º—ã
- [x] –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- 19 —á–∞—Ç–æ–≤, ~26k —Å–æ–æ–±—â–µ–Ω–∏–π
- RPS: ~0.004 (–æ—á–µ–Ω—å –Ω–∏–∑–∫–∏–π)
- **–†–µ—à–µ–Ω–∏–µ: Kafka –Ω–µ –Ω—É–∂–Ω–∞**
- **–†–µ—à–µ–Ω–∏–µ: –ü–µ—Ä–µ–µ–∑–¥ –Ω–∞ telebot.v3**
- –°–æ–∑–¥–∞–Ω–∞ —Å—Ö–µ–º–∞ –ë–î: `migrations/001_initial_schema.sql`
- –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ plugin-based –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

---

## –§–∞–∑–∞ 1: –ë–∞–∑–æ–≤—ã–π –∫–∞—Ä–∫–∞—Å (Core Framework)

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å–Ω—ã–π –∫–∞—Ä–∫–∞—Å –±–µ–∑ Kafka

### –ó–∞–¥–∞—á–∏:

#### 1.1 –£–¥–∞–ª–µ–Ω–∏–µ Kafka-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- [ ] –£–¥–∞–ª–∏—Ç—å `internal/kafkabot/`
- [ ] –£–¥–∞–ª–∏—Ç—å Kafka-related –∫–æ–¥ –∏–∑ `internal/core/`
- [ ] –£–¥–∞–ª–∏—Ç—å Kafka-related –∫–æ–¥ –∏–∑ `internal/telegram_bot/`
- [ ] –£–¥–∞–ª–∏—Ç—å Kafka –∏–∑ `docker-compose.env.yaml`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `go.mod` ‚Äî —É–¥–∞–ª–∏—Ç—å `github.com/segmentio/kafka-go`

#### 1.2 –ü–µ—Ä–µ–µ–∑–¥ –Ω–∞ telebot.v3
- [ ] –î–æ–±–∞–≤–∏—Ç—å `gopkg.in/telebot.v3` –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- [ ] –£–¥–∞–ª–∏—Ç—å `github.com/go-telegram-bot-api/telegram-bot-api/v5`
- [ ] –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π `cmd/bot/main.go` —Å telebot.v3
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Long Polling (–±–µ–∑ webhook)

#### 1.3 Core Framework
- [ ] `internal/core/bot.go` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π Bot wrapper
- [ ] `internal/core/context.go` ‚Äî MessageContext –¥–ª—è –º–æ–¥—É–ª–µ–π
- [ ] `internal/core/registry.go` ‚Äî ModuleRegistry (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥—É–ª—è–º–∏)
- [ ] `internal/core/interface.go` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Module
- [ ] `internal/core/router.go` ‚Äî —Ä–æ—É—Ç–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ –º–æ–¥—É–ª—è–º

#### 1.4 Database Layer
- [ ] `internal/database/postgres.go` ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
- [ ] `internal/database/migrations.go` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è `github.com/golang-migrate/migrate/v4`
- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å `migrations/001_initial_schema.sql`

#### 1.5 Repository Layer (–æ–±—â–∏–µ)
- [ ] `internal/repository/chats.go` ‚Äî ChatsRepository
- [ ] `internal/repository/users.go` ‚Äî UsersRepository
- [ ] `internal/repository/modules.go` ‚Äî ModulesRepository (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–∏–µ–º –º–æ–¥—É–ª–µ–π)
- [ ] `internal/repository/event_log.go` ‚Äî EventLogRepository

#### 1.6 Middleware
- [ ] `internal/middleware/logging.go` ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ (zap)
- [ ] `internal/middleware/recovery.go` ‚Äî panic recovery
- [ ] `internal/middleware/admin_check.go` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

#### 1.7 Config
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `internal/config/config.go` ‚Äî —É–±—Ä–∞—Ç—å Kafka, –¥–æ–±–∞–≤–∏—Ç—å –º–æ–¥—É–ª–∏
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
  ```
  TELEGRAM_BOT_TOKEN
  POSTGRES_DSN
  LOG_LEVEL
  ADMIN_USER_IDS (—Ç–≤–æ–∏ user_id –¥–ª—è —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∞)
  DEFAULT_MODULES (—Å–ø–∏—Å–æ–∫ –º–æ–¥—É–ª–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  ```

#### 1.8 –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
- [ ] `/start` ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
- [ ] `/help` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
- [ ] `/modules` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥—É–ª—è–º–∏ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω —á–∞—Ç–∞)
- [ ] `/version` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ

**–¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã:** 2-3 –¥–Ω—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –†–∞–±–æ—Ç–∞—é—â–∏–π —Å–∫–µ–ª–µ—Ç –±–æ—Ç–∞ –±–µ–∑ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞, –Ω–æ —Å –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π

---

## –§–∞–∑–∞ 2: –ú–æ–¥—É–ª—å Limiter (–ª–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç)

**–¶–µ–ª—å:** –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ª–∏–º–∏—Ç–æ–≤ –∏–∑ Python

### –ó–∞–¥–∞—á–∏:

#### 2.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è
- [ ] `internal/modules/limiter/module.go` ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ Module
- [ ] `internal/modules/limiter/service.go` ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ª–∏–º–∏—Ç–æ–≤
- [ ] `internal/modules/limiter/repository.go` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –ë–î (limiter_config, limiter_counters)
- [ ] `internal/modules/limiter/commands.go` ‚Äî –∫–æ–º–∞–Ω–¥—ã `/setlimit`, `/showlimits`, `/mystats`

#### 2.2 –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- [ ] –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏: `scripts/migrate_limits.py` –∏–ª–∏ `scripts/migrate_limits.go`
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –∏–∑ `{chat_id}_limits` ‚Üí `limiter_config`
- [ ] –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞:
  ```python
  # Python: –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ = –≤—Å–µ –ª–∏–º–∏—Ç—ã –¥–ª—è user_id
  {user_id: "allmembers", photo: 10, video: 5, ...}
  
  # Go: –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ = –æ–¥–∏–Ω –ª–∏–º–∏—Ç
  {chat_id, user_id: NULL, content_type: "photo", daily_limit: 10}
  {chat_id, user_id: NULL, content_type: "video", daily_limit: 5}
  ```

#### 2.3 –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –ø—Ä–∏ –≤—Ö–æ–¥—è—â–µ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
- [ ] –ü–æ–¥—Å—á—ë—Ç –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞ (–∏—Å–ø–æ–ª—å–∑—É—è `limiter_counters`)
- [ ] –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
- [ ] –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∫–æ–≥–¥–∞ –æ—Å—Ç–∞–ª–æ—Å—å 2 —Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ –ª–∏–º–∏—Ç–∞
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ VIP (–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤)
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/setlimit <—Ç–∏–ø> <–ª–∏–º–∏—Ç>` (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
  - `-1` = –∑–∞–ø—Ä–µ—Ç
  - `0` = –±–µ–∑ –ª–∏–º–∏—Ç–∞
  - `N` = —Å—É—Ç–æ—á–Ω—ã–π –ª–∏–º–∏—Ç
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/showlimits` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –ª–∏–º–∏—Ç—ã —á–∞—Ç–∞
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/mystats` ‚Äî –ª–∏—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ —Å—É—Ç–∫–∏

#### 2.4 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] Unit-—Ç–µ—Å—Ç—ã –¥–ª—è LimiterService
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ç–µ—Å—Ç–æ–≤–æ–π –ë–î

**–¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã:** 2-3 –¥–Ω—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –†–∞–±–æ—Ç–∞—é—â–∏–µ –ª–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç, –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–Ω–∞–ª–æ–≥ Python –≤–µ—Ä—Å–∏–∏

---

## –§–∞–∑–∞ 3: –ú–æ–¥—É–ª—å Reactions (—Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞)

**–¶–µ–ª—å:** –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–µ–∞–∫—Ü–∏–π –∏–∑ Python

### –ó–∞–¥–∞—á–∏:

#### 3.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è
- [ ] `internal/modules/reactions/module.go`
- [ ] `internal/modules/reactions/matcher.go` ‚Äî regex matching
- [ ] `internal/modules/reactions/repository.go` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –ë–î (reactions_config, reactions_log)
- [ ] `internal/modules/reactions/commands.go` ‚Äî –∫–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∞–∫—Ü–∏—è–º–∏

#### 3.2 –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- [ ] –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏: `scripts/migrate_reactions.py` –∏–ª–∏ `scripts/migrate_reactions.go`
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –∏–∑ `{chat_id}_reaction` ‚Üí `reactions_config`
- [ ] –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞:
  ```python
  # Python
  {contenttype: "text", answertype: "sticker", regex: "\\b–∞–º–∏–≥–∞\\b", 
   answer: "CAACAgIAAxk...", violation: 11}
  
  # Go
  {chat_id, content_type: "text", trigger_type: "regex", 
   trigger_pattern: "\\b–∞–º–∏–≥–∞\\b", reaction_type: "sticker",
   reaction_data: "CAACAgIAAxk...", violation_code: 11}
  ```

#### 3.3 –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ regex –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –≤ text/caption
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∏–∫–µ—Ä–∞ –∏–ª–∏ —Ç–µ–∫—Å—Ç–∞ –≤ –æ—Ç–≤–µ—Ç
- [ ] –ê–Ω—Ç–∏—Ñ–ª—É–¥: cooldown 10 –º–∏–Ω—É—Ç –º–µ–∂–¥—É —Ä–µ–∞–∫—Ü–∏—è–º–∏ (–∏—Å–ø–æ–ª—å–∑—É—è `reactions_log`)
- [ ] –ü–æ–¥—Å—á—ë—Ç –Ω–∞—Ä—É—à–µ–Ω–∏–π (violation_code=21 –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –Ω–∞—Ä—É—à–µ–Ω–∏–π)
- [ ] –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –Ω–∞—Ä—É—à–µ–Ω–∏–π
- [ ] –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∞–∫—Ü–∏—è–º–∏ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω):
  - `/addreaction <contenttype> <regex> <reaction_type> <data>`
  - `/listreactions` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ä–µ–∞–∫—Ü–∏–∏
  - `/delreaction <id>` ‚Äî —É–¥–∞–ª–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é
  - `/testreaction <text>` ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫–∏–µ —Ä–µ–∞–∫—Ü–∏–∏ —Å—Ä–∞–±–æ—Ç–∞—é—Ç

#### 3.4 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] Unit-—Ç–µ—Å—Ç—ã –¥–ª—è regex matching
- [ ] –¢–µ—Å—Ç—ã –∞–Ω—Ç–∏—Ñ–ª—É–¥–∞

**–¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã:** 2-3 –¥–Ω—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –†–∞–±–æ—Ç–∞—é—â–∏–µ —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞

---

## –§–∞–∑–∞ 4: –ú–æ–¥—É–ª—å Statistics (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### –ó–∞–¥–∞—á–∏:

#### 4.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è
- [ ] `internal/modules/statistics/module.go`
- [ ] `internal/modules/statistics/collector.go` ‚Äî —Å–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- [ ] `internal/modules/statistics/repository.go` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –ë–î (statistics_daily)
- [ ] `internal/modules/statistics/commands.go`

#### 4.2 –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- [ ] –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ `messages` ‚Üí `statistics_daily` (–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∏–ª–∏ –ø–æ –∑–∞–ø—Ä–æ—Å—É)
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/mystats` ‚Äî –ª–∏—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ —Å—É—Ç–∫–∏
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/chatstats` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —á–∞—Ç–∞ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
- [ ] –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥:
  ```
  @username —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ —Å—É—Ç–∫–∏
  5 —Ñ–æ—Ç–æ –∏–∑ 10
  3 –≤–∏–¥–µ–æ –∏–∑ 5
  12 —Å—Ç–∏–∫–µ—Ä–æ–≤ –∏–∑ 20
  2 —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –Ω–∞—Ä—É—à–µ–Ω–∏—è –∏–∑ 5
  ```

**–¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã:** 1-2 –¥–Ω—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–º–∞–Ω–¥—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

---

## –§–∞–∑–∞ 5: –ú–æ–¥—É–ª—å Scheduler (–∑–∞–¥–∞—á–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é)

**–¶–µ–ª—å:** –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª scheduletask.py

### –ó–∞–¥–∞—á–∏:

#### 5.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è
- [ ] `internal/modules/scheduler/module.go`
- [ ] `internal/modules/scheduler/cron.go` ‚Äî cron scheduler (robfig/cron)
- [ ] `internal/modules/scheduler/repository.go` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –ë–î (scheduler_tasks)
- [ ] `internal/modules/scheduler/commands.go`

#### 5.2 –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∑–∞–¥–∞—á–∏ –∏–∑ Python –∫–æ–¥–∞ –≤ `scheduler_tasks`
- [ ] –ü—Ä–∏–º–µ—Ä: –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∏–∫–µ—Ä–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00

#### 5.3 –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- [ ] –ó–∞–ø—É—Å–∫ cron-–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –º–æ–¥—É–ª—è
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- [ ] –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω):
  - `/addtask <name> <cron> <type> <data>` 
  - `/listtasks`
  - `/deltask <id>`
  - `/runtask <id>` ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é

**–¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã:** 1-2 –¥–Ω—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## –§–∞–∑–∞ 6: –ú–æ–¥—É–ª—å AntiSpam (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –±—É–¥—É—â–µ–≥–æ)

**–¶–µ–ª—å:** –î–æ–±–∞–≤–∏—Ç—å –∞–Ω—Ç–∏—Å–ø–∞–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### –ó–∞–¥–∞—á–∏:

#### 6.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è
- [ ] `internal/modules/antispam/module.go`
- [ ] `internal/modules/antispam/detector.go` ‚Äî –¥–µ—Ç–µ–∫—Ç–æ—Ä—ã —Å–ø–∞–º–∞
- [ ] `internal/modules/antispam/repository.go` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –ë–î (antispam_config)

#### 6.2 –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- [ ] –î–µ—Ç–µ–∫—Ç–æ—Ä flood (N —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ M —Å–µ–∫—É–Ω–¥)
- [ ] –î–µ—Ç–µ–∫—Ç–æ—Ä –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- [ ] –î–µ—Ç–µ–∫—Ç–æ—Ä —Å—Å—ã–ª–æ–∫/—É–ø–æ–º–∏–Ω–∞–Ω–∏–π
- [ ] –î–µ–π—Å—Ç–≤–∏—è: warn, delete, mute, ban
- [ ] –ö–æ–º–∞–Ω–¥—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)

**–¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã:** 2-3 –¥–Ω—è (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

---

## –§–∞–∑–∞ 7: –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

**–¶–µ–ª—å:** –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram –∫–æ–º–∞–Ω–¥—ã

### –ó–∞–¥–∞—á–∏:

#### 7.1 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ VIP-—Å—Ç–∞—Ç—É—Å–æ–º
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/setvip @username` (—Ç–æ–ª—å–∫–æ —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω)
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/removevip @username`
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/listvips`

#### 7.2 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/addadmin @username` (—Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü —á–∞—Ç–∞)
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/removeadmin @username`
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/listadmins`
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Telegram API (getChatAdministrators)

#### 7.3 Inline-–∫–Ω–æ–ø–∫–∏ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
- [ ] Inline keyboard –¥–ª—è `/modules`
- [ ] Inline keyboard –¥–ª—è `/setlimit`
- [ ] Inline keyboard –¥–ª—è `/addreaction`

#### 7.4 –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –∏ —Å–æ–±—ã—Ç–∏—è
- [ ] –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –±–æ—Ç–∞ –≤ —á–∞—Ç
- [ ] –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–æ–≤—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —á–∞—Ç–∞
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ left_chat_member (–ø—Ä–æ—â–∞–Ω–∏–µ)

**–¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã:** 2-3 –¥–Ω—è

---

## –§–∞–∑–∞ 8: Production-ready

**–¶–µ–ª—å:** –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

### –ó–∞–¥–∞—á–∏:

#### 8.1 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏
- [ ] Prometheus –º–µ—Ç—Ä–∏–∫–∏:
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ —Ç–∏–ø–∞–º
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π –ª–∏–º–∏—Ç–æ–≤
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π —Ä–µ–∞–∫—Ü–∏–π
  - Latency –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- [ ] Health endpoints (`/healthz`, `/readyz`)
- [ ] Grafana dashboard

#### 8.2 –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ç—Ä–µ–π—Å–∏–Ω–≥
- [ ] –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ (zap) ‚Äî —É–∂–µ –µ—Å—Ç—å
- [ ] –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: OpenTelemetry –¥–ª—è distributed tracing

#### 8.3 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î
- [ ] –ò–Ω–¥–µ–∫—Å—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã (—É–∂–µ –µ—Å—Ç—å –≤ —Å—Ö–µ–º–µ)
- [ ] –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ `messages` —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] VACUUM / ANALYZE –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### 8.4 Deployment
- [ ] CI/CD pipeline (GitHub Actions)
- [ ] Docker –æ–±—Ä–∞–∑ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω (multi-stage build)
- [ ] docker-compose –¥–ª—è production
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã PostgreSQL

#### 8.5 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] README —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —á–∞—Ç–æ–≤
- [ ] –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–æ–¥—É–ª–µ–π

**–¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã:** 3-4 –¥–Ω—è

---

## –ò—Ç–æ–≥–æ–≤—ã–µ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã

| –§–∞–∑–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|------|----------|--------------|-----------|
| 0 | –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ | - |
| 1 | –ë–∞–∑–æ–≤—ã–π –∫–∞—Ä–∫–∞—Å | 2-3 –¥–Ω—è | üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ |
| 2 | –ú–æ–¥—É–ª—å Limiter | 2-3 –¥–Ω—è | üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ |
| 3 | –ú–æ–¥—É–ª—å Reactions | 2-3 –¥–Ω—è | üü† –í—ã—Å–æ–∫–∏–π |
| 4 | –ú–æ–¥—É–ª—å Statistics | 1-2 –¥–Ω—è | üü† –í—ã—Å–æ–∫–∏–π |
| 5 | –ú–æ–¥—É–ª—å Scheduler | 1-2 –¥–Ω—è | üü° –°—Ä–µ–¥–Ω–∏–π |
| 6 | –ú–æ–¥—É–ª—å AntiSpam | 2-3 –¥–Ω—è | üü¢ –ù–∏–∑–∫–∏–π (–±—É–¥—É—â–µ–µ) |
| 7 | –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å | 2-3 –¥–Ω—è | üü† –í—ã—Å–æ–∫–∏–π |
| 8 | Production-ready | 3-4 –¥–Ω—è | üü° –°—Ä–µ–¥–Ω–∏–π |

**MVP (—Ñ–∞–∑—ã 1-4):** 7-10 –¥–Ω–µ–π
**Full (—Ñ–∞–∑—ã 1-7):** 12-16 –¥–Ω–µ–π
**Production (—Ñ–∞–∑—ã 1-8):** 15-20 –¥–Ω–µ–π

---

## –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –§–∞–∑–∞ 1 ‚Äî –ë–∞–∑–æ–≤—ã–π –∫–∞—Ä–∫–∞—Å

**–ì–æ—Ç–æ–≤ –Ω–∞—á–∏–Ω–∞—Ç—å –ø–æ —Ç–≤–æ–µ–π –∫–æ–º–∞–Ω–¥–µ!**

–ù–∞—á–∏–Ω–∞–µ–º —Å —É–¥–∞–ª–µ–Ω–∏—è Kafka –∏ —Å–æ–∑–¥–∞–Ω–∏—è core framework?
